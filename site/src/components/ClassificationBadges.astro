---
import type { Language } from "../i18n/config";
import { t } from "../i18n/translations";

interface Props {
  peerReviewed?: boolean;
  openAccess?: boolean;
  method?: "empirical" | "synthesis" | "theoretical" | "lived_experience" | null;
  voice?: "academic" | "practitioner" | "organization" | "individual" | null;
  lang: Language;
  compact?: boolean;
}

const { peerReviewed, openAccess, method, voice, lang, compact = false } =
  Astro.props;
const translations = t(lang);

const methodLabels: Record<string, string> = {
  empirical: translations.badges.empirical,
  synthesis: translations.badges.synthesis,
  theoretical: translations.badges.theoretical,
  lived_experience: translations.badges.livedExperience,
};

const voiceLabels: Record<string, string> = {
  academic: translations.badges.academic,
  practitioner: translations.badges.practitioner,
  organization: translations.badges.organization,
  individual: translations.badges.individual,
};

const badgeSize = compact ? "px-2 py-0.5 text-xs" : "px-2.5 py-1 text-xs";
---

<div class="flex flex-wrap gap-1.5">
  {
    Boolean(peerReviewed) && (
      <span
        class={`rounded-full bg-blue-100 font-medium text-blue-700 ${badgeSize}`}
      >
        {translations.badges.peerReviewed}
      </span>
    )
  }

  {
    Boolean(openAccess) && (
      <span
        class={`rounded-full bg-green-100 font-medium text-green-700 ${badgeSize}`}
      >
        {translations.badges.openAccess}
      </span>
    )
  }

  {
    method && (
      <span
        class={`rounded-full bg-purple-100 font-medium text-purple-700 ${badgeSize}`}
      >
        {methodLabels[method]}
      </span>
    )
  }

  {
    voice && (
      <span
        class={`rounded-full bg-amber-100 font-medium text-amber-700 ${badgeSize}`}
      >
        {voiceLabels[voice]}
      </span>
    )
  }
</div>
