---
import type { Language } from "../i18n/config";
import { t } from "../i18n/translations";

interface Props {
  peerReviewed?: boolean;
  openAccess?: boolean;
  method?: "empirical" | "synthesis" | "theoretical" | "lived_experience" | null;
  voice?: "academic" | "practitioner" | "organization" | "individual" | null;
  lang: Language;
  compact?: boolean;
}

const { peerReviewed, openAccess, method, voice, lang, compact = false } =
  Astro.props;
const translations = t(lang);

const methodLabels: Record<string, string> = {
  empirical: translations.badges.empirical,
  synthesis: translations.badges.synthesis,
  theoretical: translations.badges.theoretical,
  lived_experience: translations.badges.livedExperience,
};

const voiceLabels: Record<string, string> = {
  academic: translations.badges.academic,
  practitioner: translations.badges.practitioner,
  organization: translations.badges.organization,
  individual: translations.badges.individual,
};

const badgeSize = compact ? "px-2 py-0.5 text-xs" : "px-2.5 py-1 text-xs";
---

<div class="flex flex-wrap gap-1.5">
  {/* Flag badges first (teal) - trust signals */}
  {
    Boolean(peerReviewed) && (
      <span
        class={`inline-flex items-center gap-1 rounded-full bg-accent-100 font-medium text-accent-800 ${badgeSize}`}
      >
        <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
        </svg>
        {translations.badges.peerReviewed}
      </span>
    )
  }

  {
    Boolean(openAccess) && (
      <span
        class={`inline-flex items-center gap-1 rounded-full bg-accent-100 font-medium text-accent-800 ${badgeSize}`}
      >
        <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"/>
        </svg>
        {translations.badges.openAccess}
      </span>
    )
  }

  {/* Method badge (primary blue) */}
  {
    method && (
      <span
        class={`rounded-full bg-primary-500 font-medium text-white ${badgeSize}`}
      >
        {methodLabels[method]}
      </span>
    )
  }

  {/* Voice badge (stone) */}
  {
    voice && (
      <span
        class={`rounded-full bg-stone-100 font-medium text-stone-800 ${badgeSize}`}
      >
        {voiceLabels[voice]}
      </span>
    )
  }
</div>
